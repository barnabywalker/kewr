<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KNMS • kewr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="KNMS">
<meta property="og:description" content="kewr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/IPNI.html">IPNI</a>
    </li>
    <li>
      <a href="../articles/KNMS.html">KNMS</a>
    </li>
    <li>
      <a href="../articles/POWO.html">POWO</a>
    </li>
    <li>
      <a href="../articles/WCVP.html">WCVP</a>
    </li>
    <li>
      <a href="../articles/articles/building-checklist.html">Building a species checklist</a>
    </li>
    <li>
      <a href="../articles/articles/mapping-assessed-species.html">Mapping assessed species</a>
    </li>
    <li>
      <a href="../articles/articles/retrieve-all-query-results.html">Retrieving all results for a query</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/barnabywalker/kewr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="KNMS_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>KNMS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/barnabywalker/kewr/blob/master/vignettes/KNMS.Rmd"><code>vignettes/KNMS.Rmd</code></a></small>
      <div class="hidden name"><code>KNMS.Rmd</code></div>

    </div>

    
    
<p>The <a href="http://namematch.science.kew.org/">Kew Names Matching Service (KNMS)</a> allows a user to submit taxon names for matching against records in <a href="http://powo.science.kew.org/">Plants of the World Online (POWO)</a>. As far as I can tell, it uses exact matching as well as some rules-based matching to account for common orthographic variants and Latin mistakes.</p>
<p>The website provides interfaces for submitting a list of names copied into a text field, as well as through a CSV upload. I’ve made this package interface with the text field submission.</p>
<p>I’m not sure if KNMS is being maintained or updated at the moment, and may point towards an old version of POWO/WCVP. Therefore, it’s a good first pass for matching the bulk of names but it’s worth checking through any unmatched names, as they may be in POWO or WCVP.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://barnabywalker.github.io/kewr/">kewr</a></span><span class="op">)</span></code></pre></div>
<div id="matching-names" class="section level2">
<h2 class="hasAnchor">
<a href="#matching-names" class="anchor"></a>Matching names</h2>
<p>To use KNMS, you just need to submit names for matching as a character vector or list.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/match_knms.html">match_knms</a></span><span class="op">(</span><span class="st">"Poa annua"</span><span class="op">)</span>
<span class="va">matches</span>
<span class="co">#&gt; &lt;KNMS match: 1 names submitted&gt;</span>
<span class="co">#&gt; Matches returned: 0</span>
<span class="co">#&gt; Multiple matches: 1</span>
<span class="co">#&gt; Unmatched names: 0</span>
<span class="co">#&gt; List of 1</span>
<span class="co">#&gt;  $ :List of 4</span>
<span class="co">#&gt;   ..$ : chr "Poa annua"</span>
<span class="co">#&gt;   ..$ : chr "multiple_matches"</span>
<span class="co">#&gt;   ..$ : chr "urn:lsid:ipni.org:names:416502-1"</span>
<span class="co">#&gt;   ..$ : chr "Poa annua Linnaea 6: 38 (1831) Schltdl. &amp; Cham. 1831"</span></code></pre></div>
<p>Where a name could be matched with multiple records - for example, if the same name has been published as different concepts - KNMS will return multiple matches, as it has here.</p>
<p>The raw results from KNMS can be a bit difficult to interpret, so it is best to <code>tidy</code> them for inspection.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">matches</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 4</span>
<span class="co">#&gt;   submitted matched ipni_id  matched_record                                     </span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;lgl&gt;   &lt;chr&gt;    &lt;chr&gt;                                              </span>
<span class="co">#&gt; 1 Poa annua TRUE    416502-1 Poa annua Linnaea 6: 38 (1831) Schltdl. &amp; Cham. 18…</span>
<span class="co">#&gt; 2 Poa annua TRUE    320035-2 Poa annua Sp. Pl.: 68 (1753) L. 1753</span></code></pre></div>
<p>We can see here that <code>Poa annua</code> has matched to both <em>Poa annua L.</em> and <em>Poa annua Schltdl. &amp; Cham.</em>.</p>
<p>To avoid having to resolve these multiple matches, it is usually best to submit the author string as part of the name, if it is available.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/match_knms.html">match_knms</a></span><span class="op">(</span><span class="st">"Poa annua L."</span><span class="op">)</span>
<span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">matches</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   submitted    matched ipni_id  matched_record                      </span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;lgl&gt;   &lt;chr&gt;    &lt;chr&gt;                               </span>
<span class="co">#&gt; 1 Poa annua L. TRUE    320035-2 Poa annua Sp. Pl.: 68 (1753) L. 1753</span></code></pre></div>
<p>Multiple names can be submitted at once, as a list or character vector.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">names_to_match</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Poa annua L."</span>, <span class="st">"Myrcia guianensis"</span>, <span class="st">"Bulbophyllum sp."</span><span class="op">)</span>

<span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/match_knms.html">match_knms</a></span><span class="op">(</span><span class="va">names_to_match</span><span class="op">)</span>
<span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">matches</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;   submitted        matched ipni_id matched_record                               </span>
<span class="co">#&gt;   &lt;chr&gt;            &lt;lgl&gt;   &lt;chr&gt;   &lt;chr&gt;                                        </span>
<span class="co">#&gt; 1 Poa annua L.     TRUE    320035… Poa annua Sp. Pl.: 68 (1753) L. 1753         </span>
<span class="co">#&gt; 2 Myrcia guianens… TRUE    598851… Myrcia guianensis Prodr. 3: 245 (1828) (Aubl…</span>
<span class="co">#&gt; 3 Bulbophyllum sp. TRUE    325894… Bulbophyllum Hist. Orchid.: t. 3 (1822) Thou…</span></code></pre></div>
<p>KNMS may not always match to the rank that you want. For instance, in the previous example <em>Bulbophyllum sp.</em> was matched to the genus name <em>Bulbophyllum</em>, rather than returning no match at all.</p>
<p>KNMS will accept a large number of names for matching, but may hang if too many are submitted. The <code>match_knms</code> function will return a warning if you submit more than 1000 names. In these cases, it might be easier to split your list of names into chunks, or use the CSV upload on the KNMS website.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Barnaby Walker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
