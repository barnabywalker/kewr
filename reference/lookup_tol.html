<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Look up a sequenced specimen or gene in ToL. — lookup_tol • kewr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Look up a sequenced specimen or gene in ToL. — lookup_tol" />
<meta property="og:description" content="Request the record for a sequenced specimen or gene in ToL using
its ToL ID." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/IPNI.html">IPNI</a>
    </li>
    <li>
      <a href="../articles/KNMS.html">KNMS</a>
    </li>
    <li>
      <a href="../articles/POWO.html">POWO</a>
    </li>
    <li>
      <a href="../articles/ToL.html">ToL</a>
    </li>
    <li>
      <a href="../articles/WCVP.html">WCVP</a>
    </li>
    <li>
      <a href="../articles/articles/building-checklist.html">Building a species checklist</a>
    </li>
    <li>
      <a href="../articles/articles/conservation-status-treeoflife.html">Putting conservation status on the Tree of Life</a>
    </li>
    <li>
      <a href="../articles/articles/mapping-assessed-species.html">Mapping assessed species</a>
    </li>
    <li>
      <a href="../articles/articles/retrieve-all-query-results.html">Retrieving all results for a query</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/barnabywalker/kewr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Look up a sequenced specimen or gene in ToL.</h1>
    <small class="dont-index">Source: <a href='https://github.com/barnabywalker/kewr/blob/master/R/tol.R'><code>R/tol.R</code></a></small>
    <div class="hidden name"><code>lookup_tol.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Request the record for a sequenced specimen or gene in ToL using
its ToL ID.</p>
    </div>

    <pre class="usage"><span class='fu'>lookup_tol</span><span class='op'>(</span><span class='va'>id</span>, type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"specimen"</span>, <span class='st'>"gene"</span><span class='op'>)</span>, .wait <span class='op'>=</span> <span class='fl'>0.1</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>id</th>
      <td><p>A string containing a valid ToL ID.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>The type of record to lookup, either <code>specimen</code> or <code>gene</code>.</p></td>
    </tr>
    <tr>
      <th>.wait</th>
      <td><p>Time to wait before making a request, to help
rate limiting.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>tol_{type}</code> object, which is a simple structure with fields
for each of the fields returned by the lookup API,
as well as the the <a href='https://httr.r-lib.org/reference/response.html'>httr response object</a>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <a href='https://treeoflife.kew.org/'>Tree of Life</a> is a database
of specimens sequenced as part of Kew's efforts to build
a comprehensive evolutionary tree of life for flowering plants.</p>
<p>The lookup API allows users to retrieve taxonomic and sequencing
information for a specific sequenced specimen or gene using the unique ToL ID.
If this is not known, it can be found out using the <a href='search_tol.html'>ToL search API</a>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Baker W.J., Bailey P., Barber V., Barker A., Bellot S., Bishop D., Botigue L.R., Brewer G., Carruthers T., Clarkson J.J., Cook J., Cowan R.S., Dodsworth S., Epitawalage N., Francoso E., Gallego B., Johnson M., Kim J.T., Leempoel K., Maurin O., McGinnie C., Pokorny L., Roy S., Stone M., Toledo E., Wickett N.J., Zuntini A.R., Eiserhardt W.L., Kersey P.J., Leitch I.J. &amp; Forest F. 2021. A Comprehensive Phylogenomic Platform for Exploring the Angiosperm Tree of Life. Systematic Biology, 2021; syab035, https://doi.org/10.1093/sysbio/syab035</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'>
<ul>
<li><p><code><a href='search_tol.html'>search_tol()</a></code> to search ToL using taxonomic information.</p></li>
<li><p><code><a href='download_tol.html'>download_tol()</a></code> to download a file from the ToL SFTP server.</p></li>
<li><p><code><a href='load_tol.html'>load_tol()</a></code> load a file from the ToL SFTP server.</p></li>
</ul>

<p>Other ToL functions: 
<code><a href='download_tol.html'>download_tol</a>()</code>,
<code><a href='load_tol.html'>load_tol</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># retrieve information for a particular specimen</span>
<span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"1296"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='output co'>#&gt; &lt;ToL specimen id: 1296&gt;
#&gt; Species: Anisosepalum alboviolaceum
#&gt; Family: Acanthaceae
#&gt; Order: Lamiales
#&gt; Collector: Champluvier, D.
#&gt; Project: PAFTOL
#&gt; No. of reads: 289,138
#&gt; Sequencing platform: HiSeq
#&gt; Suspicious placement: FALSE</div><div class='input'>
<span class='co'># print a summary of the returned information</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"1296"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;ToL specimen id: 1296&gt;
#&gt; Species: Anisosepalum alboviolaceum
#&gt; Family: Acanthaceae
#&gt; Order: Lamiales
#&gt; Collector: Champluvier, D.
#&gt; Project: PAFTOL
#&gt; No. of reads: 289,138
#&gt; Sequencing platform: HiSeq
#&gt; Suspicious placement: FALSE</div><div class='input'>
<span class='co'># tidy into a tibble</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"1296"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='input'><span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 20</span>
#&gt;     age collector       collector_no country fasta_file_url     gene_stats genus
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>           <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>        <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>              <span style='color: #949494; font-style: italic;'>&lt;list&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;lis&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>  <span style='text-decoration: underline;'>1</span>995 Champluvier, D. 5295         <span style='color: #BB0000;'>NA</span>      http://sftp.kew.o… <span style='color: #949494;'>&lt;tibble [</span>… <span style='color: #949494;'>&lt;tib</span>…
#&gt; <span style='color: #949494;'># … with 13 more variables: herbcat_url &lt;lgl&gt;, id &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   is_suspicious_placement &lt;lgl&gt;, material_source &lt;list&gt;,</span>
#&gt; <span style='color: #949494;'>#   museum_barcode &lt;lgl&gt;, project &lt;list&gt;, raw_reads &lt;list&gt;, sequence_id &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   species &lt;list&gt;, specimen_reference &lt;chr&gt;, specimen_source &lt;chr&gt;,</span>
#&gt; <span style='color: #949494;'>#   taxonomy &lt;list&gt;, voucher_no &lt;lgl&gt;</span></div><div class='input'>
<span class='co'># extract the returned gene stats for the specimen</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"1296"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='input'><span class='va'>tidied</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
<span class='va'>tidied</span><span class='op'>$</span><span class='va'>gene_stats</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; <span style='color: #949494;'># A tibble: 1 × 2</span>
#&gt;   bp_recovered genes_recovered
#&gt;          <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>           <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>       <span style='text-decoration: underline;'>136</span>851             337
#&gt; </div><div class='input'>
<span class='co'># expand the taxonomy info</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"1296"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='input'><span class='va'>tidied</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
<span class='fu'>tidyr</span><span class='fu'>::</span><span class='fu'><a href='https://tidyr.tidyverse.org/reference/nest.html'>unnest</a></span><span class='op'>(</span><span class='va'>tidied</span>, cols<span class='op'>=</span><span class='va'>taxonomy</span>, names_sep<span class='op'>=</span><span class='st'>"_"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 23</span>
#&gt;     age collector       collector_no country fasta_file_url     gene_stats genus
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>           <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>        <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>              <span style='color: #949494; font-style: italic;'>&lt;list&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;lis&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>  <span style='text-decoration: underline;'>1</span>995 Champluvier, D. 5295         <span style='color: #BB0000;'>NA</span>      http://sftp.kew.o… <span style='color: #949494;'>&lt;tibble [</span>… <span style='color: #949494;'>&lt;tib</span>…
#&gt; <span style='color: #949494;'># … with 16 more variables: herbcat_url &lt;lgl&gt;, id &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   is_suspicious_placement &lt;lgl&gt;, material_source &lt;list&gt;,</span>
#&gt; <span style='color: #949494;'>#   museum_barcode &lt;lgl&gt;, project &lt;list&gt;, raw_reads &lt;list&gt;, sequence_id &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   species &lt;list&gt;, specimen_reference &lt;chr&gt;, specimen_source &lt;chr&gt;,</span>
#&gt; <span style='color: #949494;'>#   taxonomy_family &lt;chr&gt;, taxonomy_genus &lt;chr&gt;, taxonomy_order &lt;chr&gt;,</span>
#&gt; <span style='color: #949494;'>#   taxonomy_species &lt;chr&gt;, voucher_no &lt;lgl&gt;</span></div><div class='input'>
<span class='co'># retrieve information for a particular gene</span>
<span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"51"</span>, type<span class='op'>=</span><span class='st'>"gene"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='output co'>#&gt; &lt;ToL gene id: 51&gt;
#&gt; Exemplar name: AAAS
#&gt; Exemplar source species: Arabidopsis thaliana (Mouse-ear cress)
#&gt; No. species: 2905
#&gt; No. genera: 2294
#&gt; Avg. recovered length: 493.4949
#&gt; Avg. % recovered: 86.3</div><div class='input'>
<span class='co'># print a summary of the returned information</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"51"</span>, type<span class='op'>=</span><span class='st'>"gene"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;ToL gene id: 51&gt;
#&gt; Exemplar name: AAAS
#&gt; Exemplar source species: Arabidopsis thaliana (Mouse-ear cress)
#&gt; No. species: 2905
#&gt; No. genera: 2294
#&gt; Avg. recovered length: 493.4949
#&gt; Avg. % recovered: 86.3</div><div class='input'>
<span class='co'># tidy into a tibble</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>lookup_tol</span><span class='op'>(</span><span class='st'>"51"</span>, type<span class='op'>=</span><span class='st'>"gene"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>No encoding supplied: defaulting to UTF-8.</span></div><div class='input'><span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 16</span>
#&gt;   alignment_file_url        average_contig_… average_contig_le… exemplar_access…
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                                <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>              <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>           
#&gt; <span style='color: #BCBCBC;'>1</span> http://sftp.kew.org/pub/…             493.               86.3 Q8GWR1          
#&gt; <span style='color: #949494;'># … with 12 more variables: exemplar_hyperlink &lt;chr&gt;, exemplar_name &lt;chr&gt;,</span>
#&gt; <span style='color: #949494;'>#   exemplar_species &lt;chr&gt;, fasta_file_url &lt;chr&gt;, genera_count &lt;int&gt;, id &lt;int&gt;,</span>
#&gt; <span style='color: #949494;'>#   internal_name &lt;chr&gt;, newick_file &lt;chr&gt;, newick_file_path_name &lt;chr&gt;,</span>
#&gt; <span style='color: #949494;'>#   sequence_count &lt;int&gt;, species_count &lt;int&gt;, tree_file_url &lt;chr&gt;</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Barnaby Walker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


